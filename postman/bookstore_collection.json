{
    "info": {
        "_postman_id": "ac4edc1c-ab11-429c-b03e-2d43fd56fe0b",
        "name": "Bookstore API",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "description": "Bookstore API Postman 컬렉션"
    },
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://113.198.66.75:18192"
        },
        {
            "key": "accessToken",
            "value": ""
        },
        {
            "key": "refreshToken",
            "value": ""
        },
        {
            "key": "userEmail",
            "value": "user@example.com"
        },
        {
            "key": "userPassword",
            "value": "P@ssw0rd!"
        },
        {
            "key": "adminEmail",
            "value": "admin@example.com"
        },
        {
            "key": "adminPassword",
            "value": "P@ssw0rd!"
        },
        {
            "key": "bookId",
            "value": "1"
        },
        {
            "key": "authorId",
            "value": "1"
        },
        {
            "key": "categoryId",
            "value": "1"
        },
        {
            "key": "publisherId",
            "value": "1"
        },
        {
            "key": "reviewId",
            "value": "101"
        },
        {
            "key": "cartItemId",
            "value": "1"
        },
        {
            "key": "orderId",
            "value": "501"
        },
        {
            "key": "wishlistBookId",
            "value": "12"
        },
        {
            "key": "favoriteBookId",
            "value": "12"
        },
        {
            "key": "page",
            "value": "0"
        },
        {
            "key": "size",
            "value": "20"
        },
        {
            "key": "sort",
            "value": "createdAt,DESC"
        },
        {
            "key": "keyword",
            "value": "클린"
        }
    ],
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
            }
        ]
    },
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// baseUrl 기본값 보정",
                    "if (!pm.collectionVariables.get('baseUrl')) {",
                    "  pm.collectionVariables.set('baseUrl', 'http://localhost:8080');",
                    "}",
                    "",
                    "// 편의용: Bearer 접두사가 토큰 값에 들어있으면 제거",
                    "const t = pm.collectionVariables.get('accessToken');",
                    "if (t && t.startsWith('Bearer ')) {",
                    "  pm.collectionVariables.set('accessToken', t.replace(/^Bearer\\s+/,'').trim());",
                    "}",
                    "",
                    "// 요청 시작 시각(로그/디버그용)",
                    "pm.variables.set('reqStartedAt', Date.now().toString());"
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// 공통 응답시간 체크(실패해도 테스트는 계속 진행)",
                    "try {",
                    "  const started = parseInt(pm.variables.get('reqStartedAt') || '0', 10);",
                    "  if (started) {",
                    "    const ms = Date.now() - started;",
                    "    pm.test('응답 시간(ms) 기록', function () {",
                    "      pm.expect(ms).to.be.a('number');",
                    "    });",
                    "  }",
                    "} catch (e) {}"
                ]
            }
        }
    ],
    "item": [
        {
            "name": "System",
            "item": [
                {
                    "name": "헬스체크",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/health",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('status=UP', () => pm.expect(j.status).to.eql('UP'));",
                                    "pm.test('version 존재', () => pm.expect(j).to.have.property('version'));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Auth",
            "item": [
                {
                    "name": "회원가입",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/auth/signup",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"{{userPassword}}\",\n  \"username\": \"홍길동\",\n  \"address\": \"서울시 강남구 역삼동\",\n  \"phoneNumber\": \"010-1234-5678\"\n}"
                        },
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('isSuccess=true', () => pm.expect(j.isSuccess).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "로그인 (USER)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/auth/login",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"{{userPassword}}\"\n}"
                        },
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "let token = null;",
                                    "try {",
                                    "  const j = pm.response.json();",
                                    "  // 다양한 응답 형태를 허용(프로젝트 구현에 따라 수정 가능)",
                                    "  token = j?.payload?.accessToken || j?.payload?.token || j?.accessToken || j?.token || null;",
                                    "} catch (e) {}",
                                    "",
                                    "// 헤더 Authorization: Bearer xxx 형태도 지원",
                                    "if (!token) {",
                                    "  const ah = pm.response.headers.get('Authorization');",
                                    "  if (ah) token = ah.replace(/^Bearer\\s+/,'').trim();",
                                    "}",
                                    "",
                                    "if (token) {",
                                    "  // 어떤 로그인 요청이냐에 따라 user/admin 토큰 분리 저장",
                                    "  const reqName = pm.info.requestName || '';",
                                    "  if (reqName.includes('ADMIN')) pm.collectionVariables.set('adminAccessToken', token);",
                                    "  if (reqName.includes('USER')) pm.collectionVariables.set('userAccessToken', token);",
                                    "  pm.collectionVariables.set('accessToken', token);",
                                    "}",
                                    "",
                                    "// refresh_token 쿠키 저장(Set-Cookie에서 추출)",
                                    "const setCookie = pm.response.headers.get('Set-Cookie');",
                                    "if (setCookie) {",
                                    "  const m = setCookie.match(/refresh_token=([^;]+)/);",
                                    "  if (m && m[1]) pm.collectionVariables.set('refreshToken', m[1]);",
                                    "}",
                                    "",
                                    "pm.test('isSuccess=true (있으면)', function () {",
                                    "  try {",
                                    "    const j = pm.response.json();",
                                    "    if (typeof j.isSuccess !== 'undefined') pm.expect(j.isSuccess).to.eql(true);",
                                    "  } catch (e) {",
                                    "    // ignore",
                                    "  }",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "로그인 (ADMIN)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/auth/login",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
                        },
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "let token = null;",
                                    "try {",
                                    "  const j = pm.response.json();",
                                    "  // 다양한 응답 형태를 허용(프로젝트 구현에 따라 수정 가능)",
                                    "  token = j?.payload?.accessToken || j?.payload?.token || j?.accessToken || j?.token || null;",
                                    "} catch (e) {}",
                                    "",
                                    "// 헤더 Authorization: Bearer xxx 형태도 지원",
                                    "if (!token) {",
                                    "  const ah = pm.response.headers.get('Authorization');",
                                    "  if (ah) token = ah.replace(/^Bearer\\s+/,'').trim();",
                                    "}",
                                    "",
                                    "if (token) {",
                                    "  // 어떤 로그인 요청이냐에 따라 user/admin 토큰 분리 저장",
                                    "  const reqName = pm.info.requestName || '';",
                                    "  if (reqName.includes('ADMIN')) pm.collectionVariables.set('adminAccessToken', token);",
                                    "  if (reqName.includes('USER')) pm.collectionVariables.set('userAccessToken', token);",
                                    "  pm.collectionVariables.set('accessToken', token);",
                                    "}",
                                    "",
                                    "// refresh_token 쿠키 저장(Set-Cookie에서 추출)",
                                    "const setCookie = pm.response.headers.get('Set-Cookie');",
                                    "if (setCookie) {",
                                    "  const m = setCookie.match(/refresh_token=([^;]+)/);",
                                    "  if (m && m[1]) pm.collectionVariables.set('refreshToken', m[1]);",
                                    "}",
                                    "",
                                    "pm.test('isSuccess=true (있으면)', function () {",
                                    "  try {",
                                    "    const j = pm.response.json();",
                                    "    if (typeof j.isSuccess !== 'undefined') pm.expect(j.isSuccess).to.eql(true);",
                                    "  } catch (e) {",
                                    "    // ignore",
                                    "  }",
                                    "});"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "토큰 재발급 (reissue)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Cookie",
                                "value": "refresh_token={{refreshToken}}"
                            }
                        ],
                        "url": "{{baseUrl}}/api/auth/reissue",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "let token = null;",
                                    "try { const j = pm.response.json(); token = j?.payload?.accessToken || j?.payload?.token || j?.accessToken || j?.token || null; } catch(e) {}",
                                    "if (!token) { const ah = pm.response.headers.get('Authorization'); if (ah) token = ah.replace(/^Bearer\\s+/,'').trim(); }",
                                    "if (token) pm.collectionVariables.set('accessToken', token);",
                                    "pm.test('토큰 저장(가능 시)', () => pm.expect(true).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "로그아웃",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": "{{baseUrl}}/api/auth/logout"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "pm.collectionVariables.set('accessToken','');",
                                    "pm.test('토큰 초기화', () => pm.expect(pm.collectionVariables.get('accessToken')).to.eql(''));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Users",
            "item": [
                {
                    "name": "내 정보 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/users/me"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('isSuccess=true', () => pm.expect(j.isSuccess).to.eql(true));",
                                    "pm.test('payload.userId 존재', () => pm.expect(j.payload).to.have.property('userId'));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "내 정보 수정",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/users/me",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"김철수\",\n  \"address\": \"서울시 강남구 역삼동\",\n  \"phoneNumber\": \"010-5678-1234\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('isSuccess=true', () => pm.expect(j.isSuccess).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "비밀번호 변경",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/users/me/password",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"password\": \"NewP@ssw0rd!1\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('isSuccess=true', () => pm.expect(j.isSuccess).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "회원 탈퇴",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/users/me"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Books",
            "item": [
                {
                    "name": "도서 검색(목록)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/books?keyword={{keyword}}&categoryId={{categoryId}}&authorId={{authorId}}&publisherId={{publisherId}}&page={{page}}&size={{size}}&sort={{sort}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('isSuccess=true', () => pm.expect(j.isSuccess).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "도서 등록 (ADMIN)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/books",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"isbn13\": \"9791162244246\",\n  \"title\": \"Effective Java\",\n  \"description\": \"자바 프로그래머를 위한 필독서\",\n  \"price\": 36000,\n  \"stockQuantity\": 100,\n  \"publishedAt\": \"2018-11-01T00:00:00\",\n  \"publisherId\": 1,\n  \"authorIds\": [\n    1\n  ],\n  \"categoryIds\": [\n    1\n  ]\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));",
                                    "const j = pm.response.json();",
                                    "if (j?.payload?.bookId) pm.collectionVariables.set('bookId', String(j.payload.bookId));",
                                    "pm.test('bookId 저장(가능 시)', () => pm.expect(true).to.eql(true));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "도서 상세 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/books/{{bookId}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "const j = pm.response.json();",
                                    "pm.test('payload.bookId 존재', () => pm.expect(j.payload).to.have.property('bookId'));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "도서 수정 (ADMIN)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/books/{{bookId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Effective Java 3/E\",\n  \"description\": \"자바 모범 사례\",\n  \"price\": 40000,\n  \"stockQuantity\": 200,\n  \"publishedAt\": \"2019-01-01T00:00:00\",\n  \"publisherId\": 1,\n  \"authorIds\": [\n    1\n  ],\n  \"categoryIds\": [\n    1\n  ]\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "도서 삭제 (ADMIN)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/books/{{bookId}}",
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Authors",
            "item": [
                {
                    "name": "작가 목록 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/authors",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "작가 등록 (ADMIN)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/authors",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"조슈아 블로크\",\n  \"bio\": \"Java 언어의 아키텍트\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "작가 상세 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/authors/{{authorId}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "작가 수정 (ADMIN)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/authors/{{authorId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"로버트 마틴\",\n  \"bio\": \"Clean Code 저자\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "작가 삭제 (ADMIN)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/authors/{{authorId}}",
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Categories",
            "item": [
                {
                    "name": "카테고리 목록 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/categories",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "카테고리 등록 (ADMIN)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/categories",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"컴퓨터/IT\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "카테고리 상세 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/categories/{{categoryId}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "카테고리 수정 (ADMIN)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/categories/{{categoryId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"IT/컴퓨터\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "카테고리 삭제 (ADMIN)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/categories/{{categoryId}}",
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Publishers",
            "item": [
                {
                    "name": "출판사 목록 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/publishers",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "출판사 등록 (ADMIN)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/publishers",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"인사이트\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "출판사 상세 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/publishers/{{publisherId}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "출판사 수정 (ADMIN)",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/publishers/{{publisherId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"위키북스\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "출판사 삭제 (ADMIN)",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/publishers/{{publisherId}}",
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{adminAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Carts",
            "item": [
                {
                    "name": "내 장바구니 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/carts/my"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "장바구니 비우기",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/carts/my"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "장바구니 항목 추가",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/carts/items",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"bookId\": 1,\n  \"quantity\": 2\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "장바구니 항목 수량 변경",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/carts/items/{{cartItemId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"quantity\": 3\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));",
                                    "try {",
                                    "  const j = pm.response.json();",
                                    "  const first = j?.payload?.items?.[0];",
                                    "  if (first?.cartItemId) pm.collectionVariables.set('cartItemId', String(first.cartItemId));",
                                    "} catch(e) {}"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "장바구니 항목 삭제",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/carts/items/{{cartItemId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Orders",
            "item": [
                {
                    "name": "주문 생성(checkout)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": "{{baseUrl}}/api/orders/checkout"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "내 주문 내역 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/orders/me?page={{page}}&size={{size}}&sort={{sort}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "주문 상세 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/orders/{{orderId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "주문 취소",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/orders/{{orderId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Reviews",
            "item": [
                {
                    "name": "도서 리뷰 목록 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/books/{{bookId}}/reviews?page={{page}}&size={{size}}&sort={{sort}}",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "리뷰 작성",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/books/{{bookId}}/reviews",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"rating\": 5,\n  \"content\": \"정말 유익한 책입니다!\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('201 Created', () => pm.response.to.have.status(201));",
                                    "try { const j = pm.response.json(); if (j?.payload?.reviewId) pm.collectionVariables.set('reviewId', String(j.payload.reviewId)); } catch(e) {}"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "내 리뷰 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/reviews/me?page={{page}}&size={{size}}&sort={{sort}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "리뷰 수정",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/reviews/{{reviewId}}",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"rating\": 4,\n  \"content\": \"다시 읽어보니 조금 아쉬운 점이 있네요.\"\n}"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "리뷰 삭제",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/reviews/{{reviewId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "리뷰 좋아요",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": "{{baseUrl}}/api/reviews/{{reviewId}}/likes"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "리뷰 좋아요 취소",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/reviews/{{reviewId}}/likes"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Wishlist",
            "item": [
                {
                    "name": "내 위시리스트 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/wishlist"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "위시리스트 추가",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": "{{baseUrl}}/api/wishlist/{{wishlistBookId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "위시리스트 삭제",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/wishlist/{{wishlistBookId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Favorites",
            "item": [
                {
                    "name": "내 즐겨찾기 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/favorites"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "즐겨찾기 추가",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": "{{baseUrl}}/api/favorites/{{favoriteBookId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('200 OK', () => pm.response.to.have.status(200));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "즐겨찾기 삭제",
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": "{{baseUrl}}/api/favorites/{{favoriteBookId}}"
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('204 No Content', () => pm.response.to.have.status(204));"
                                ]
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Error Cases",
            "item": [
                {
                    "name": "401 - 토큰 없이 내 정보 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/users/me",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('401 Unauthorized', () => pm.response.to.have.status(401));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "403 - USER 토큰으로 카테고리 생성(ADMIN 필요)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/categories",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"name\": \"권한테스트\"\n}"
                        },
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{userAccessToken}}",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('403 Forbidden', () => pm.response.to.have.status(403));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "404 - 존재하지 않는 도서 조회",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/books/99999999",
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('404 Not Found', () => pm.response.to.have.status(404));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "400 - 회원가입 Validation 실패(필수값 누락)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": "{{baseUrl}}/api/auth/signup",
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"email\": \"bad-email\"\n}"
                        },
                        "auth": {
                            "type": "noauth"
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('400/422 (검증 실패)', () => pm.expect([400,422]).to.include(pm.response.code));"
                                ]
                            }
                        }
                    ]
                },
                {
                    "name": "401 - 만료/위조 토큰으로 접근",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": "{{baseUrl}}/api/orders/me?page=0&size=20",
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "this.is.not.a.jwt",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('401 Unauthorized', () => pm.response.to.have.status(401));"
                                ]
                            }
                        }
                    ]
                }
            ]
        }
    ]
}